<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Kraken 1H Gainers & Losers</title>
<style>
:root {
  --bg: #000;
  --fg: #fff;
  --muted: #9b9b9b;
  --green: #00ff7f;
  --red: #ff5252;
}

* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  width: 640px;
  height: 640px;
  background: black;
  font-family: Arial, sans-serif;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--fg);
}

/* Circle safe-area */
.safe {
  width: 540px;
  height: 540px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
}

/* Page system */
.page {
  position: absolute;
  width: 100%;
  height: 100%;
  padding: 40px;
  display: flex;
  flex-direction: column;
  justify-content: center;
  opacity: 0;
  transition: opacity 0.4s ease-in-out;
}

.page.active {
  opacity: 1;
}

/* Title */
.title {
  text-align: center;
  font-size: 42px;
  font-weight: 700;
  margin-bottom: 26px;
  letter-spacing: 1.2px;
}

/* List */
.list {
  display: flex;
  flex-direction: column;
  gap: 18px;
}

/* Row style */
.row {
  display: flex;
  justify-content: space-between;
  font-size: 30px;
  font-weight: 600;
}

.symbol {
  letter-spacing: 1px;
}

.change {
  min-width: 160px;
  text-align: right;
}

.green { color: var(--green); }
.red   { color: var(--red); }

/* Footer time */
.updated {
  margin-top: 26px;
  text-align: center;
  font-size: 14px;
  color: var(--muted);
}
</style>
</head>
<body>

<div class="safe">

  <!-- GAINERS PAGE -->
  <div id="page-gainers" class="page active">
    <div class="title">1H GAINERS</div>
    <div id="gainers-list" class="list"></div>
    <div id="time1" class="updated">Updating...</div>
  </div>

  <!-- LOSERS PAGE -->
  <div id="page-losers" class="page">
    <div class="title">1H LOSERS</div>
    <div id="losers-list" class="list"></div>
    <div id="time2" class="updated">Updating...</div>
  </div>

</div>

<script>
/* -------- CONFIG -------- */
const PAGE_SWITCH_MS = 6000;      // Page rotation time
const REFRESH_MS = 5 * 60 * 1000; // Data refresh interval (5 min)

/* -------- CREATE ROWS -------- */
function createRows(containerId, colorClass) {
  const container = document.getElementById(containerId);
  const rows = [];

  for (let i = 0; i < 5; i++) {
    const row = document.createElement("div");
    row.className = "row";

    const sym = document.createElement("span");
    sym.className = "symbol";
    sym.textContent = "---";

    const chg = document.createElement("span");
    chg.className = "change " + colorClass;
    chg.textContent = "--.--%";

    row.appendChild(sym);
    row.appendChild(chg);
    container.appendChild(row);

    rows.push({ sym, chg });
  }
  return rows;
}

const gainersRows = createRows("gainers-list", "green");
const losersRows  = createRows("losers-list",  "red");

/* -------- PAGE SWITCH -------- */
let currentPage = "gainers";

function showPage(name) {
  currentPage = name;

  document.getElementById("page-gainers").classList.toggle("active", name === "gainers");
  document.getElementById("page-losers").classList.toggle("active", name === "losers");
}

setInterval(() => {
  showPage(currentPage === "gainers" ? "losers" : "gainers");
}, PAGE_SWITCH_MS);

/* -------- TIME -------- */
function setUpdatedTime(id) {
  const el = document.getElementById(id);
  const now = new Date();
  const h = String(now.getHours()).padStart(2,"0");
  const m = String(now.getMinutes()).padStart(2,"0");
  el.textContent = "Updated " + h + ":" + m;
}

/* -------- DATA APPLY -------- */
function applyData(gainers, losers) {

  gainers.slice(0,5).forEach((c, i) => {
    gainersRows[i].sym.textContent = c.symbol;
    gainersRows[i].chg.textContent = "+ " + c.change.toFixed(2) + "%";
  });

  losers.slice(0,5).forEach((c, i) => {
    losersRows[i].sym.textContent = c.symbol;
    losersRows[i].chg.textContent = c.change.toFixed(2) + "%";
  });

  setUpdatedTime("time1");
  setUpdatedTime("time2");
}

/* -------- TEMP TEST DATA -------- */
function loadData() {

  // Example output (this is working demo data only)
  const gainers = [
    {symbol:"VRA", change:36.72},
    {symbol:"SBTC",change: 8.47},
    {symbol:"HSK", change: 4.36},
    {symbol:"OOB", change: 4.04},
    {symbol:"ICNT",change: 3.82},
  ];

  const losers = [
    {symbol:"MYX", change:-14.96},
    {symbol:"WOJAK",change:-8.65},
    {symbol:"IRYS",change:-8.34},
    {symbol:"BEAT",change:-6.94},
    {symbol:"META",change:-6.68}
  ];

  applyData(gainers, losers);
}

loadData();
setInterval(loadData, REFRESH_MS);
</script>

</body>
</html>
